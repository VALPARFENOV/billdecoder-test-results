<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BillDecoder/LabDecoder - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º—Ç–æ–≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 3em;
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1em;
            color: #666;
        }

        .tabs {
            display: flex;
            background: white;
            border-radius: 15px;
            margin-bottom: 30px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 1.1em;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: #4CAF50;
            color: white;
        }

        .tab:hover {
            background: #45a049;
            color: white;
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .tab-content.active {
            display: block;
        }

        .prompt-section {
            margin-bottom: 40px;
            padding: 25px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            background: #fafafa;
        }

        .prompt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #4CAF50;
        }

        .prompt-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
        }

        .prompt-stats {
            display: flex;
            gap: 20px;
        }

        .prompt-stat {
            text-align: center;
        }

        .prompt-stat-number {
            font-size: 1.8em;
            font-weight: bold;
            color: #4CAF50;
        }

        .prompt-stat-label {
            font-size: 0.9em;
            color: #666;
        }

        .test-results {
            display: grid;
            gap: 15px;
        }

        .test-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #4CAF50;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .test-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .test-file {
            font-weight: bold;
            color: #2c3e50;
        }

        .test-status {
            background: #4CAF50;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        .test-meta {
            display: flex;
            gap: 20px;
            font-size: 0.9em;
            color: #666;
            margin-bottom: 15px;
        }

        .test-response {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            border-left: 3px solid #4CAF50;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            max-height: 200px;
            overflow-y: auto;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #4CAF50;
        }

        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .response-full {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .document-type-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            margin-right: 10px;
        }

        .badge-bill { background: #e3f2fd; color: #1976d2; }
        .badge-lab { background: #f3e5f5; color: #7b1fa2; }
        .badge-eob { background: #e8f5e8; color: #388e3c; }

        .search-box {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .search-box:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #4CAF50;
            background: white;
            color: #4CAF50;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active {
            background: #4CAF50;
            color: white;
        }

        .filter-btn:hover {
            background: #4CAF50;
            color: white;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .prompt-stats {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß™ BillDecoder/LabDecoder</h1>
            <p>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º—Ç–æ–≤ AI</p>
            <p style="font-size: 0.9em; margin-top: 10px;">Session ID: 6e44d4e6-c09a-4e0d-943c-f3bc7580fe81 | –î–∞—Ç–∞: 30.09.2025 18:05</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">45</div>
                <div class="stat-label">–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">100%</div>
                <div class="stat-label">–£—Å–ø–µ—à–Ω–æ—Å—Ç—å</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">9.4—Å</div>
                <div class="stat-label">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">40K</div>
                <div class="stat-label">–¢–æ–∫–µ–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('overview')">üìä –û–±–∑–æ—Ä</button>
            <button class="tab" onclick="showTab('prompts')">ü§ñ –ü—Ä–æ–º—Ç—ã</button>
            <button class="tab" onclick="showTab('documents')">üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã</button>
        </div>

        <div id="overview" class="tab-content active">
            <h2>üìà –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <h3>üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ç–∏–ø–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h3>
                    <ul style="margin-top: 15px; list-style: none;">
                        <li style="margin: 10px 0; padding: 10px; background: white; border-radius: 5px;">
                            <span class="document-type-badge badge-bill">BILL</span>
                            <strong>15/15 (100%)</strong> - 9.34—Å, 11,125 —Ç–æ–∫–µ–Ω–æ–≤
                        </li>
                        <li style="margin: 10px 0; padding: 10px; background: white; border-radius: 5px;">
                            <span class="document-type-badge badge-lab">LAB</span>
                            <strong>15/15 (100%)</strong> - 9.06—Å, 15,091 —Ç–æ–∫–µ–Ω–æ–≤
                        </li>
                        <li style="margin: 10px 0; padding: 10px; background: white; border-radius: 5px;">
                            <span class="document-type-badge badge-eob">EOB</span>
                            <strong>15/15 (100%)</strong> - 9.90—Å, 13,785 —Ç–æ–∫–µ–Ω–æ–≤
                        </li>
                    </ul>
                </div>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <h3>ü§ñ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ç–∏–ø–∞–º –ø—Ä–æ–º—Ç–æ–≤</h3>
                    <ul style="margin-top: 15px; list-style: none;">
                        <li style="margin: 10px 0; padding: 10px; background: white; border-radius: 5px;">
                            <strong>Document Classification:</strong> 15/15 (100%)
                        </li>
                        <li style="margin: 10px 0; padding: 10px; background: white; border-radius: 5px;">
                            <strong>Patient Education:</strong> 15/15 (100%)
                        </li>
                        <li style="margin: 10px 0; padding: 10px; background: white; border-radius: 5px;">
                            <strong>Confidence Scoring:</strong> 15/15 (100%)
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="prompts" class="tab-content">
            <h2>ü§ñ –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –ø—Ä–æ–º—Ç–∞–º</h2>
            <input type="text" class="search-box" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ —Ñ–∞–π–ª–∞–º –∏–ª–∏ –æ—Ç–≤–µ—Ç–∞–º..." onkeyup="filterTests()">
            <div class="filter-buttons">
                <button class="filter-btn active" onclick="filterByType('all')">–í—Å–µ</button>
                <button class="filter-btn" onclick="filterByType('medical_bill')">–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Å—á–µ—Ç–∞</button>
                <button class="filter-btn" onclick="filterByType('lab_results')">–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
                <button class="filter-btn" onclick="filterByType('eob')">EOB –¥–æ–∫—É–º–µ–Ω—Ç—ã</button>
            </div>
            
            <div id="prompts-content">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>

        <div id="documents" class="tab-content">
            <h2>üìÑ –ê–Ω–∞–ª–∏–∑ –ø–æ —Ç–∏–ø–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin-top: 20px;">
                <div class="prompt-section">
                    <div class="prompt-header">
                        <div class="prompt-title">üìã –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Å—á–µ—Ç–∞</div>
                        <div class="prompt-stats">
                            <div class="prompt-stat">
                                <div class="prompt-stat-number">15</div>
                                <div class="prompt-stat-label">—Ç–µ—Å—Ç–æ–≤</div>
                            </div>
                            <div class="prompt-stat">
                                <div class="prompt-stat-number">100%</div>
                                <div class="prompt-stat-label">—É—Å–ø–µ—Ö</div>
                            </div>
                        </div>
                    </div>
                    <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —Å—á–µ—Ç–æ–≤, –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤.</p>
                </div>
                
                <div class="prompt-section">
                    <div class="prompt-header">
                        <div class="prompt-title">üß™ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</div>
                        <div class="prompt-stats">
                            <div class="prompt-stat">
                                <div class="prompt-stat-number">15</div>
                                <div class="prompt-stat-label">—Ç–µ—Å—Ç–æ–≤</div>
                            </div>
                            <div class="prompt-stat">
                                <div class="prompt-stat-number">100%</div>
                                <div class="prompt-stat-label">—É—Å–ø–µ—Ö</div>
                            </div>
                        </div>
                    </div>
                    <p>–ê–Ω–∞–ª–∏–∑ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –∏ –æ—Ü–µ–Ω–∫–∞ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π.</p>
                </div>
                
                <div class="prompt-section">
                    <div class="prompt-header">
                        <div class="prompt-title">üí∞ EOB –¥–æ–∫—É–º–µ–Ω—Ç—ã</div>
                        <div class="prompt-stats">
                            <div class="prompt-stat">
                                <div class="prompt-stat-number">15</div>
                                <div class="prompt-stat-label">—Ç–µ—Å—Ç–æ–≤</div>
                            </div>
                            <div class="prompt-stat">
                                <div class="prompt-stat-number">100%</div>
                                <div class="prompt-stat-label">—É—Å–ø–µ—Ö</div>
                            </div>
                        </div>
                    </div>
                    <p>–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ Explanation of Benefits, –∞–Ω–∞–ª–∏–∑ —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö –≤—ã–ø–ª–∞—Ç –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ -->
    <div id="responseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">–ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç AI</h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –±—ã –∏–∑ JSON —Ñ–∞–π–ª–∞)
        const testData = {
            "session_id": "6e44d4e6-c09a-4e0d-943c-f3bc7580fe81",
            "test_timestamp": "2025-09-30T18:05:07.323482",
            "total_tests": 45,
            "successful_tests": 45,
            "failed_tests": 0,
            "success_rate": 1.0,
            "results": [
                {
                    "test_id": "test-1",
                    "document_type": "medical_bill",
                    "document_file": "bill_001_medium.json",
                    "prompt_type": "document_classification",
                    "success": true,
                    "response_time": 6.08,
                    "response_text": "Based on the provided document, here is the classification and extracted key metadata:\n\nDocument type: Medical bill/invoice\n\nDate of service: 2025-09-12\n\nProvider name: Metro Urgent Care\n\nPatient identifier: Phillip Adkins (Note: This appears to be the full name rather than a redacted identifier. In practice, this should be redacted for privacy.)\n\nKey services/tests mentioned:\n1. Venipuncture (Code: 36415)\n2. Complete blood count (Code: 85025)\n\nUrgency level: Urgent (inferred from the provider name \"Metro Urgent Care\")\n\nAdditional notes:\n- The total charges for the visit were $80.24\n- Insurance paid $69.76\n- The patient's responsibility is $10.48\n\nThis document is clearly a medical bill or invoice, providing a breakdown of services rendered, their associated costs, and the financial responsibility of both the insurance provider and the patient.",
                    "metrics": {
                        "input_tokens": 355,
                        "output_tokens": 185,
                        "total_tokens": 540
                    }
                },
                {
                    "test_id": "test-2",
                    "document_type": "medical_bill",
                    "document_file": "bill_001_medium.json",
                    "prompt_type": "patient_education",
                    "success": true,
                    "response_time": 9.95,
                    "response_text": "Here's a breakdown of the medical bill to help you understand it better:\n\n1. **Document Summary**: \n   This is a medical bill from Metro Urgent Care for services provided to Phillip Adkins on September 12, 2025. It details the medical procedures performed, their costs, and the amount the patient needs to pay.\n\n2. **Key Information**: \n   - You had two procedures done:\n     1. Venipuncture: This is a fancy word for a blood draw.\n     2. Complete blood count: This is a common blood test that checks overall health.\n   - Your insurance covered most of the bill.\n   - You have a small amount left to pay.\n\n3. **Financial Impact**: \n   - The total bill was $80.24.\n   - Your insurance paid $69.76.\n   - You are responsible for paying $10.48.\n\n4. **Next Steps**: \n   - Check if the bill matches your records of the visit.\n   - Verify with your insurance that they've processed the claim correctly.\n   - Pay the remaining $10.48 to Metro Urgent Care by the due date (which isn't specified on this bill).\n   - If you have questions or concerns about the bill, contact Metro Urgent Care's billing department.\n\n5. **Questions to Ask**: \n   - When is the payment due?\n   - What are my payment options?\n   - Can I get an itemized bill with more details about the services?\n   - If I have questions about the blood test results, who should I contact?\n\nRemember, always consult with your healthcare provider for specific medical advice or concerns about your treatment. This breakdown is to help you understand your bill, not to provide medical guidance.",
                    "metrics": {
                        "input_tokens": 355,
                        "output_tokens": 397,
                        "total_tokens": 752
                    }
                },
                {
                    "test_id": "test-3",
                    "document_type": "lab_results",
                    "document_file": "lab_001_full.json",
                    "prompt_type": "patient_education",
                    "success": true,
                    "response_time": 9.96,
                    "response_text": "Here's an analysis of Lauren Key's lab results in patient-friendly terms:\n\n1. **Results Summary**: \nGreat news, Lauren! Your lab results paint a picture of overall good health. All your test values fall within the normal ranges, which suggests your body systems are functioning well.\n\n2. **Individual Test Explanations**:\n\n- Glucose: This measures your blood sugar. Your result is like a \"Goldilocks\" level - not too high, not too low.\n- Cholesterol (Total, HDL, LDL): These are like the traffic in your blood vessels. Your levels suggest smooth sailing!\n- Triglycerides: Another type of fat in your blood. Yours are at a healthy level.\n- Hemoglobin and Hematocrit: These measure your red blood cells, which carry oxygen. Yours are doing a great job!\n- White Blood Cells: These are your body's defense team. Your count shows a strong immune system.\n- Platelets: These help your blood clot when needed. Your level is just right.\n- Creatinine: This checks how well your kidneys are filtering. Yours are working efficiently.\n- ALT and AST: These look at liver health. Your liver seems to be in good shape.\n- TSH and Free T4: These check your thyroid function. Your thyroid is humming along nicely.\n\n3. **Abnormal Values**: \nGood news - there are no abnormal values to report. All your results fall within the expected healthy ranges.\n\n4. **Trend Analysis**: \nWe only have one set of results here, so we can't analyze trends over time. It's a good idea to keep track of future results to spot any changes.\n\n5. **Next Steps**: \nWhile everything looks good, it's still important to discuss these results with your doctor. They might have insights based on your personal health history. Consider asking:\n- How do these results compare to my previous tests?\n- Are there any lifestyle changes I should consider to maintain these healthy levels?\n- When should I have my next check-up or lab tests?\n\n6. **Educational Content**: \nThese tests give a snapshot of various aspects of your health:\n- Your cardiovascular health looks good, which is important for preventing heart disease.\n- Your blood sugar is well-controlled, which helps prevent diabetes.\n- Your liver and kidney function tests suggest these vital organs are working well.\n- Your thyroid function is normal, which is crucial for metabolism and energy levels.\n\nRemember, maintaining a balanced diet, regular exercise, good sleep habits, and stress management can help keep these numbers in the healthy range.\n\nAlways consult with your healthcare provider for personalized medical advice. They know your full health picture and can provide the most appropriate guidance for you.",
                    "metrics": {
                        "input_tokens": 722,
                        "output_tokens": 396,
                        "total_tokens": 1118
                    }
                }
            ]
        };

        let currentFilter = 'all';
        let currentSearch = '';

        function showTab(tabName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å –∫–Ω–æ–ø–æ–∫
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(btn => btn.classList.remove('active'));
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ –ø—Ä–æ–º—Ç–æ–≤
            if (tabName === 'prompts') {
                loadPromptsContent();
            }
        }

        function loadPromptsContent() {
            const content = document.getElementById('prompts-content');
            const prompts = ['document_classification', 'patient_education', 'confidence_scoring'];
            
            let html = '';
            
            prompts.forEach(promptType => {
                const promptTests = testData.results.filter(test => test.prompt_type === promptType);
                const promptName = getPromptDisplayName(promptType);
                
                html += `
                    <div class="prompt-section" data-prompt="${promptType}">
                        <div class="prompt-header">
                            <div class="prompt-title">${promptName}</div>
                            <div class="prompt-stats">
                                <div class="prompt-stat">
                                    <div class="prompt-stat-number">${promptTests.length}</div>
                                    <div class="prompt-stat-label">—Ç–µ—Å—Ç–æ–≤</div>
                                </div>
                                <div class="prompt-stat">
                                    <div class="prompt-stat-number">${Math.round(promptTests.reduce((sum, test) => sum + test.response_time, 0) / promptTests.length * 100) / 100}—Å</div>
                                    <div class="prompt-stat-label">—Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è</div>
                                </div>
                                <div class="prompt-stat">
                                    <div class="prompt-stat-number">${promptTests.reduce((sum, test) => sum + test.metrics.total_tokens, 0)}</div>
                                    <div class="prompt-stat-label">—Ç–æ–∫–µ–Ω–æ–≤</div>
                                </div>
                            </div>
                        </div>
                        <div class="test-results">
                `;
                
                promptTests.forEach(test => {
                    const docTypeBadge = getDocumentTypeBadge(test.document_type);
                    const fileName = test.document_file.split('/').pop();
                    
                    html += `
                        <div class="test-item" data-doc-type="${test.document_type}" data-file="${fileName}" data-response="${test.response_text.replace(/"/g, '&quot;')}">
                            <div class="test-header">
                                <div class="test-file">${docTypeBadge} ${fileName}</div>
                                <div class="test-status">‚úÖ –£—Å–ø–µ—à–Ω–æ</div>
                            </div>
                            <div class="test-meta">
                                <span>‚è±Ô∏è ${test.response_time}—Å</span>
                                <span>üî¢ ${test.metrics.total_tokens} —Ç–æ–∫–µ–Ω–æ–≤</span>
                                <span>üìÖ ${new Date(test.test_timestamp).toLocaleString('ru-RU')}</span>
                            </div>
                            <div class="test-response" onclick="showFullResponse('${test.response_text.replace(/'/g, "\\'")}', '${fileName} - ${promptName}')">
                                ${test.response_text.substring(0, 200)}${test.response_text.length > 200 ? '...' : ''}
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            content.innerHTML = html;
        }

        function getPromptDisplayName(promptType) {
            const names = {
                'document_classification': 'üìã –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤',
                'patient_education': 'üéì –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤',
                'confidence_scoring': 'üìä –û—Ü–µ–Ω–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏'
            };
            return names[promptType] || promptType;
        }

        function getDocumentTypeBadge(docType) {
            const badges = {
                'medical_bill': '<span class="document-type-badge badge-bill">BILL</span>',
                'lab_results': '<span class="document-type-badge badge-lab">LAB</span>',
                'eob': '<span class="document-type-badge badge-eob">EOB</span>'
            };
            return badges[docType] || '';
        }

        function filterByType(type) {
            currentFilter = type;
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä
            applyFilters();
        }

        function filterTests() {
            currentSearch = event.target.value.toLowerCase();
            applyFilters();
        }

        function applyFilters() {
            const testItems = document.querySelectorAll('.test-item');
            
            testItems.forEach(item => {
                const docType = item.getAttribute('data-doc-type');
                const fileName = item.getAttribute('data-file').toLowerCase();
                const response = item.getAttribute('data-response').toLowerCase();
                
                const typeMatch = currentFilter === 'all' || docType === currentFilter;
                const searchMatch = currentSearch === '' || 
                    fileName.includes(currentSearch) || 
                    response.includes(currentSearch);
                
                if (typeMatch && searchMatch) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function showFullResponse(responseText, title) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = `<div class="response-full">${responseText}</div>`;
            document.getElementById('responseModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('responseModal').style.display = 'none';
        }

        // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        window.onclick = function(event) {
            const modal = document.getElementById('responseModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            loadPromptsContent();
        });
    </script>
</body>
</html>
